<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<!-- 헤더링크 -->
<th:block th:replace="~{fragments/header_link :: header_link}" />

<body>
    <!-- Header Section Begin -->
    <th:block th:replace="~{fragments/header :: header}" />
    <!-- Header End -->
    </header>

    <section>
        <div class="container">
            <h2>Hover Rows</h2>
            <select id="sido" th:value="${sidoCode}">
                <option th:selected="${sidoCode}==00" value="00">전국</option>
                <option th:selected="${sidoCode}==11" value="11">서울특별시</option>
                <option th:selected="${sidoCode}==21" value="21">부산광역시</option>
                <option th:selected="${sidoCode}==22" value="22">대구광역시</option>
                <option th:selected="${sidoCode}==23" value="23">인천광역시</option>
                <option th:selected="${sidoCode}==24" value="24">광주광역시</option>
                <option th:selected="${sidoCode}==25" value="25">대전광역시</option>
                <option th:selected="${sidoCode == '26'}" value="26">울산광역시</option>
                <option th:selected="${sidoCode == '29'}" value="29">세종특별자치시</option>
                <option th:selected="${sidoCode == '31'}" value="31">경기도</option>
                <option th:selected="${sidoCode == '32'}" value="32">강원도</option>
                <option th:selected="${sidoCode == '33'}" value="33">충청북도</option>
                <option th:selected="${sidoCode == '34'}" value="34">충청남도</option>
                <option th:selected="${sidoCode == '35'}" value="35">전라북도</option>
                <option th:selected="${sidoCode == '36'}" value="36">전라남도</option>
                <option th:selected="${sidoCode == '37'}" value="37">경상북도</option>
                <option th:selected="${sidoCode == '38'}" value="38">경상남도</option>
                <option th:selected="${sidoCode == '39'}" value="39">제주특별자치도</option>
            </select>
            <select id="signgu">
                <option value="">시군구:선택//아직 안됨</option>
                <option value="">경기도</option>
                <option value="">충청도</option>
                <option value="">강원도</option>
            </select>
            <input type="text" id="search" th:value="${keyword != null ? keyword : ''}">
            <button type="button" id="bt_search">조회</button>

            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>관할구역</th>
                        <th>보호센터명</th>
                        <th>전화번호</th>
                        <th>주소</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="shelter, i :${shelterList}">
                        <td>
                            <a th:href="@{/shelter/detail(id=${shelter.shelter_idx})}" th:text="${shelter.orgNm}"></a>
                        </td>
                        <td th:text="${shelter.careNm}"></td>
                        <td th:text="${shelter.careTel}"></td>
                        <td th:text="${shelter.careAddr}"></td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination -->
            <div class="product__pagination">
                <nav aria-label="Page navigation">
                    <ul class="pagination justify-content-center">

                        <li class="page-item" th:class="${pager.firstPage == 1 ? 'disabled' : ''}">
                            <a class="page-link" href="#" th:href="@{/shelter/list(currentPage=${pager.firstPage-1}, sidoCode=${sidoCode}, keyword=${keyword})}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>

                        <li th:each="i : ${#numbers.sequence(pager.firstPage , pager.lastPage)}"
              th:class="${pager.currentPage==i? 'page-item active':'page-item'}">
              <a class="page-link" th:href="@{/shelter/list(currentPage=${i}, sidoCode=${sidoCode}, keyword=${keyword})}" th:text="${i}"></a>
            </li>

            <li class="page-item" th:class="${pager.lastPage == pager.totalPage ? 'disabled' : ''}">
              <a class="page-link" href="#" th:href="@{/shelter/list(currentPage=${pager.lastPage+1}, sidoCode=${sidoCode}, keyword=${keyword})}"
                aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
              </a>
            </li>

          </ul>
        </nav>
      </div>
      <!--/ Pagination -->

    </div>
  </section>

  <!-- Footer Section Begin -->
  <th:block th:replace="~{fragments/footer :: footer}" />
  <!-- Footer End -->

  <script src="/site/js/jquery-1.11.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>
  <script src="/site/js/plugins.js"></script>
  <script src="/site/js/script.js"></script>
  <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
</body>
<script type="text/javascript">
  $(function () {
    $("#bt_search").click(function () {
      var searchKeyword = $("#search").val();
      var sidoCode= $("#sido").val();
      // URL에 검색어 파라미터 추가하여 이동
      location.href = "/shelter/list?sidoCode=" + encodeURIComponent(sidoCode) + "&keyword=" + encodeURIComponent(searchKeyword);
    });
  });
  $(function () {
    $("#search").keypress(function (e) {
      // 눌러진 키의 이름 가져오기
      var keyName = e.key;

      // 눌러진 키가 'Enter'인지 확인
      if (keyName === 'Enter') {
        // 검색 버튼 클릭
        $("#bt_search").click();
      }
    });
  });
</script>

</html>